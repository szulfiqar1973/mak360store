<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!-- PWA META TAGS FOR APP FEEL -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#000000">
<title>MAK360 Store</title>

<style>
/* GLOBAL RESET */
html, body {
margin:0;
padding:0;
background:#f8f9fa;
font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,sans-serif;
-webkit-tap-highlight-color: transparent;
}
body { overflow-x: hidden; padding-bottom: 60px; }
body::-webkit-scrollbar { width:0; background:transparent; }
html { scrollbar-width:none; }

/* ========================================= */
/* PRELOADER STYLES
/* ========================================= */
#preloader {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #000000;
z-index: 100000;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
}
.preloader-content { text-align: center; }
.spinner {
width: 50px;
height: 50px;
border: 4px solid #333;
border-top: 4px solid #FFD700;
border-radius: 50%;
animation: spin 1s linear infinite;
margin: 0 auto 20px auto;
}
.preloader-brand {
font-family: 'Arial', sans-serif;
font-weight: 800;
font-size: 2.5rem;
color: #fff;
letter-spacing: 2px;
margin-bottom: 10px;
animation: pulse 1.5s infinite ease-in-out;
}
.preloader-msg {
color: #FFD700;
font-size: 14px;
font-weight: 500;
letter-spacing: 1px;
text-transform: uppercase;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } 100% { transform: scale(1); opacity: 1; } }

/* ========================================= */
/* LANDING MODE (LOCK SCROLL INITIALLY)
/* ========================================= */
body.landing-mode {
overflow: hidden;
padding-bottom: 0;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
}

/* ========================================= */
/* NEW MINI STICKY HEADER
/* ========================================= */
.mini-header {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
background-color: #000000;
z-index: 100000;
box-shadow: 0 2px 10px rgba(0,0,0,0.5);
transition: display 0.3s ease;
will-change: transform;
}

.mini-header-top {
height: 45px;
width: 100%;
display: flex;
align-items: center;
position: relative;
padding: 0 10px;
border-bottom:1px solid #222;
justify-content: space-between;
}

.top-controls-wrapper-mini {
display: flex;
gap: 10px;
align-items: center;
z-index: 5;
flex-shrink: 0;
}

/* ========================================= */
/* UPDATED MINI MENU (CATEGORIES ONLY)
/* ========================================= */
.mini-menu-wrapper {
position: relative;
z-index: 10;
}

.mini-menu-btn {
background: none;
border: none;
color: #FFD700;
font-size: 24px;
cursor: pointer;
padding: 5px;
line-height: 1;
display: flex;
align-items: center;
justify-content: center;
transition: transform 0.2s;
}

.mini-menu-btn:hover {
transform: scale(1.1);
color: #fff;
}

.mini-menu-dropdown {
position: absolute;
top: 40px;
right: 0;
background-color: #fff;
width: 220px;
border-radius: 8px;
box-shadow: 0 5px 20px rgba(0,0,0,0.3);
display: none;
flex-direction: column;
overflow: hidden;
border: 1px solid #ddd;
animation: fadeInMenu 0.2s ease-out;
max-height: 70vh;
overflow-y: auto;
}

.mini-menu-dropdown::-webkit-scrollbar {
width: 6px;
}
.mini-menu-dropdown::-webkit-scrollbar-thumb {
background-color: #ccc;
border-radius: 3px;
}

@keyframes fadeInMenu { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

.mini-menu-dropdown.active {
display: flex;
}

.mini-menu-link {
padding: 12px 15px;
text-decoration: none;
color: #000;
font-size: 13px;
font-weight: 600;
border-bottom: 1px solid #f0f0f0;
transition: background 0.2s, color 0.2s;
cursor: pointer;
}

.mini-menu-link:last-child {
border-bottom: none;
}

.mini-menu-link:hover {
background-color: #FFD700;
color: #000;
}

.mini-menu-link.active {
background-color: #FFD700;
color: #000;
border-color: #FFD700;
font-weight: 800;
box-shadow: inset 2px 0 0 #000;
}

.menu-separator {
height: 1px;
background-color: #eee;
margin: 5px 0;
}

/* ========================================= */
/* HEADER / COVER STYLES
/* ========================================= */
.cover-container {
width: 100%;
height: 100vh;
background-color: #ffffff;
display: flex;
justify-content: center;
align-items: center;
box-sizing: border-box;
flex-direction: column;
position: relative;
z-index: 10;
transition: height 0.3s ease;
}

.top-controls-wrapper {
position: fixed;
top: 20px;
left: 20px;
z-index: 99999;
display: flex;
gap: 10px;
transition: opacity 0.3s;
}

body.has-mini-header .top-controls-wrapper {
opacity: 0;
pointer-events: none;
}

.home-btn-wrapper {
background: #fff;
padding: 10px;
border-radius: 50%;
box-shadow: 0 4px 10px rgba(0,0,0,0.15);
border: 1px solid #eee;
cursor: pointer;
transition: all 0.3s ease;
}
.home-btn-wrapper:hover { background: #FFD700; transform: scale(1.1); }
.home-btn-wrapper svg { width: 24px; height: 24px; color: #000; }

/* ========================================= */
/* TOP RIGHT NAVIGATION LINKS (LANDING PAGE ONLY)
/* ========================================= */
.nav-links-wrapper {
position: fixed;
top: 22px;
right: 25px;
z-index: 99999;
display: flex;
align-items: center;
gap: 15px;
transition: opacity 0.3s;
}

/* This CSS ensures they vanish when the mini header appears */
body.has-mini-header .nav-links-wrapper {
opacity: 0;
pointer-events: none;
}

.nav-link {
font-size: 13px;
font-weight: 300;
color: #000000;
text-decoration: none;
text-transform: uppercase;
letter-spacing: 0.5px;
cursor: pointer;
transition: all 0.3s ease;
position: relative;
white-space: nowrap; /* Prevents wrapping */
}

.nav-link:hover {
color: #FFD700;
}

.nav-link::after {
content: '';
position: absolute;
width: 0;
height: 1px;
bottom: -2px;
right: 0;
background-color: #FFD700;
transition: width 0.3s ease;
}

.nav-link:hover::after {
width: 100%;
left: 0;
}

/* MOBILE FIX: Align to Home Row & Prevent Wrap */
@media(max-width: 600px) {
.nav-links-wrapper {
top: 22px; /* Aligns with Home Icon Row */
right: 10px;
gap: 8px; /* Reduced gap */
}
.nav-link {
font-size: 9px; /* Smaller font to fit */
font-weight: 700; /* Bolder for readability */
}
}

.hero-wrapper {
display: flex;
justify-content: center;
align-items: center;
width: 100%;
flex-direction: column;
}

.hero-group {
display: flex;
flex-direction: column;
align-items: center;
text-align: center;
max-width: 100%;
}

.logo-box {
display: flex;
align-items: center;
justify-content: center;
font-family: 'Arial', sans-serif;
font-weight: 800;
font-size: clamp(4rem, 12vw, 8rem);
border-radius: 12px;
overflow: hidden;
box-shadow: 0 15px 30px rgba(0,0,0,0.2);
border: 4px solid #000000;
margin-bottom: 20px;
cursor: pointer;
transition: transform 0.3s;
}
.logo-box:hover { transform: scale(1.02); }
.part-mak { background-color: #000000; color: #ffffff; padding: 10px 40px; line-height: 1; }
.part-360 { background-color: #ffffff; color: #E6C200; padding: 10px 40px; line-height: 1; }

.subtitle-wrapper { display: flex; flex-direction: column; align-items: center; margin-top: 4px; gap: 2px; }
.subtitle-text {
font-size: 14px;
font-weight: 500;
letter-spacing: 3px;
color: #333;
text-transform: uppercase;
opacity: 0;
animation: rotateIn 4s cubic-bezier(0.23, 1, 0.32, 1) forwards 0.3s;
}
.double-line { width: 100%; height: 1px; background-color: #000000; opacity: 0; }
.top-line { animation: slideInLeft 0.8s ease-out forwards 4.3s; }
.bottom-line { animation: slideInRight 0.8s ease-out forwards 4.3s; }

.lets-shop-btn {
margin-top: 30px;
padding: 12px 30px;
background: #000;
color: #fff;
border: none;
border-radius: 30px;
font-size: 16px;
font-weight: 500;
cursor: pointer;
display: flex;
align-items: center;
gap: 10px;
position: relative;
z-index: 20;
transform-origin: center center;
animation: fadeInUp 1s ease forwards 4.8s, shakeIntermittent 5.5s infinite 2s linear;
transition: all 0.3s ease;
opacity: 0;
}

@keyframes shakeIntermittent {
0% { transform: translateY(0) rotate(0deg); }
5% { transform: translateY(0) rotate(-3deg); }
10% { transform: translateY(0) rotate(3deg); }
15% { transform: translateY(0) rotate(-3deg); }
20% { transform: translateY(0) rotate(0deg); }
100% { transform: translateY(0) rotate(0deg); }
}

.lets-shop-btn:hover {
background: #FFD700 !important;
color: #000 !important;
transform: scale(1.05) !important;
box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4) !important;
}

.lets-shop-btn:hover svg { stroke: #000; }

.lets-shop-arrow { display: block; animation: bounceDown 1s infinite; }

@keyframes slideInLeft { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes rotateIn { 0% { transform: rotate(0deg) scale(10); opacity: 0; } 10% { opacity: 1; } 100% { transform: rotate(3600deg) scale(1); opacity: 1; } }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes bounceDown { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(3px); } }

@media (max-width: 600px) {
.logo-box { font-size: 18vw; }
.subtitle-text { font-size: 10px; letter-spacing: 2px; }
.hero-wrapper { transform: translateY(-10px); }
.part-mak, .part-360 { padding: 5px 20px; }
}

/* ========================================= */
/* MARQUEE STYLES
/* ========================================= */
.marquee-wrapper {
margin-top: 20px;
width: 100%;
height: 160px;
overflow: hidden;
position: relative;
display: flex;
align-items: center;
opacity: 0;
animation: fadeInUp 1s ease forwards 5.0s;
}

.marquee-track {
display: flex;
gap: 20px;
padding: 0 10px;
width: max-content;
animation: marqueeScroll 30s linear infinite;
}

.marquee-item {
width: 130px;
flex-shrink: 0;
border: 1px solid #eee;
border-radius: 12px;
padding: 10px;
background: #fff;
box-shadow: 0 4px 10px rgba(0,0,0,0.05);
cursor: pointer;
transition: transform 0.2s, box-shadow 0.2s;
display: flex;
flex-direction: column;
align-items: center;
text-align: center;
}

.marquee-item:hover {
transform: scale(1.05);
box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
border-color: #FFD700;
}

.m-img {
width: 100%;
height: 80px;
object-fit: cover;
border-radius: 8px;
margin-bottom: 8px;
}

.m-title {
font-size: 11px;
font-weight: 700;
color: #333;
margin-bottom: 4px;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
line-height: 1.2;
max-height: 26px;
}

.m-price {
font-size: 12px;
font-weight: 300;
color: #333;
background: transparent;
}

@keyframes marqueeScroll {
0% { transform: translateX(0); }
100% { transform: translateX(-50%); }
}

.marquee-wrapper:hover .marquee-track {
animation-play-state: paused;
}

/* ========================================= */
/* PAGE NAVIGATION (RIGHT BOTTOM)
/* ========================================= */
.page-nav-wrapper {
position: fixed;
right: 20px;
bottom: 30px;
top: auto;
transform: none;
display: flex;
flex-direction: column;
gap: 10px;
z-index: 900;
opacity: 0;
pointer-events: none;
transition: opacity 0.3s ease;
align-items: center;
}
.page-nav-wrapper.visible { opacity: 1; pointer-events: auto; }

.nav-btn {
width: 55px;
height: 55px;
background-color: rgba(144, 238, 144, 0.5);
color: #000;
border-radius: 50%;
border: none;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
font-size: 24px;
box-shadow: 0 4px 10px rgba(0,0,0,0.1);
backdrop-filter: blur(2px);
transition: all 0.3s ease;
}
.nav-btn:hover:not(.disabled) {
background-color: rgba(144, 238, 144, 0.9);
transform: scale(1.1);
}
.nav-btn.disabled {
opacity: 0.3;
cursor: not-allowed;
pointer-events: none;
background-color: #ccc;
}

/* ========================================= */
/* PRODUCT STORE STYLES
/* ========================================= */
#productContainer {
display:flex;
flex-wrap:wrap;
gap:25px;
justify-content:center;
padding: 100px 20px 110px;
max-width:1400px;
margin:0 auto;
background:#f8f9fa;
}

.productCard {
width: 90%;
max-width: 320px;
min-height: 500px;
border: 1px solid #000000;
border-radius: 20px;
background:#fff;
overflow: visible;
text-align:center;
box-shadow: 0 5px 20px rgba(0,0,0,0.04);
transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
position: relative;
z-index: 1;
display: flex;
flex-direction: column;
cursor: default;
}

.productCard:hover {
transform: translateY(-12px);
box-shadow: 0 20px 40px rgba(0,0,0,0.12);
}

.cardMedia {
position:relative;
height: 310px;
background:#f1f1f1;
overflow: hidden;
flex-shrink: 0;
transition: height 0.3s ease;
border-bottom: 1px solid #f0f0f0;
border-top-left-radius: 19px;
border-top-right-radius: 19px;
border-top: 1px solid #000000;
}

.cardMedia img, .cardMedia video {
width:100%;
height: 100%;
object-fit: cover;
display:none;
transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.productCard:hover .cardMedia img {
transform: scale(1.08);
}

/* ========================================= */
/* ZOOM BUTTON STYLES
/* ========================================= */
.zoomBtn {
position: absolute;
top: 10px;
right: 10px;
background: rgba(0, 0, 0, 0.6);
color: #fff;
width: 36px;
height: 36px;
border-radius: 50%;
border: none;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
z-index: 50;
transition: all 0.2s;
backdrop-filter: blur(2px);
opacity: 0.7;
pointer-events: auto;
}
.productCard:hover .zoomBtn {
background: #FFD700;
color: #000;
opacity: 1;
transform: scale(1.1);
}
.zoomBtn svg {
width: 20px;
height: 20px;
pointer-events: none;
}

/* ========================================= */
/* ARROWS
/* ========================================= */
.leftArrow, .rightArrow {
position:absolute;
top:50%;
transform:translateY(-50%);
background: rgba(255, 255, 255, 0.8);
color: #000;
padding:10px 14px;
border-radius:50%;
font-size: 18px;
cursor:pointer;
z-index: 20;
font-weight: bold;
backdrop-filter: blur(4px);
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
pointer-events: auto;
}

.leftArrow:hover, .rightArrow:hover { background: #FFD700; transform: translateY(-50%) scale(1.1); }
.leftArrow { left:15px; }
.rightArrow { right: 15px; }

.cardMedia.text-active .leftArrow,
.cardMedia.text-active .rightArrow {
top: 31.5% !important;
transition: none !important;
}

.backBtn {
display: none !important;
}
.textSlide {
display:none;
width: 100%;
height: 100%;
padding:30px;
box-sizing:border-box;
background:linear-gradient(135deg,#f8f9fa,#e9ecef);
font-size:15px;
line-height:1.6;
color: #333;
position: absolute;
top: 0;
left: 0;
overflow-y: auto;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
text-align: center;
}

.cardMedia.text-active {
height: 100% !important;
border-bottom: none;
}

.cardMedia.text-active ~ h3,
.cardMedia.text-active ~ p,
.cardMedia.text-active ~ .internal-codes,
.cardMedia.text-active ~ .price-container,
.cardMedia.text-active ~ .shipping-info,
.cardMedia.text-active ~ .action-row {
display: none !important;
}

.productCard h3 {
margin: 12px 0 5px;
font-size: 18px;
font-weight: 700;
color: #111;
text-transform: uppercase;
letter-spacing: 0.5px;
}
.productCard p {
margin: 0 0 8px;
color: #777;
font-size: 13px;
font-weight: 500;
}

/* STYLES FOR INTERNAL CODES */
.internal-codes {
display: flex;
justify-content: space-between;
width: calc(100% - 40px);
margin: 15px auto 10px;
font-size: 11px;
color: #888;
font-weight: 600;
letter-spacing: 0.5px;
background: #f4f4f4;
padding: 4px 10px;
border-radius: 4px;
border: 1px solid #eee;
}

.price-container {
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
margin: 5px 0 8px;
flex-wrap: wrap;
}

.current-price {
font-size: 18px;
font-weight: 300;
color: #000;
}

.old-price {
font-size: 13px;
text-decoration: line-through;
color: #999;
opacity: 0.8;
font-weight: 300;
}

.discount-badge {
background-color: #ff4d4d;
color: white;
font-size: 9px;
font-weight: bold;
padding: 2px 6px;
border-radius: 4px;
text-transform: uppercase;
letter-spacing: 0.5px;
}

/* ========================================= */
/* ACTION ROW BUTTONS
/* ========================================= */
.action-row {
display: flex;
gap: 12px;
width: calc(100% - 40px);
margin: 5px auto 0px auto;
align-items: center;
margin-top: auto;
}

.orderBtn, .cardShareBtn {
flex: 1;
height: 44px;
padding: 0 15px;
background: #000000;
color: #fff;
border: none;
border-radius: 12px;
cursor: pointer;
font-weight: 600;
font-size: 13px;
transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.orderBtn:hover {
background: #FFD700;
color: #000;
box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
transform: translateY(-2px);
}

.orderBtn:disabled {
background:#e0e0e0;
color:#999;
cursor: not-allowed;
box-shadow: none;
}

.cardShareBtn {
background: #fff;
color: #333;
border: 1px solid #ddd;
box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.cardShareBtn:hover {
background: #333;
color: #fff;
border-color: #333;
transform: translateY(-2px);
}

.hidden { display: none !important; }

/* ========================================= */
/* ZOOM VIEWER OVERLAY STYLES
/* ========================================= */
#zoomViewer {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.95);
z-index: 200000;
flex-direction: column;
justify-content: center;
align-items: center;
opacity: 0;
transition: opacity 0.3s ease;
}
#zoomViewer.active {
display: flex;
opacity: 1;
}

.zoom-content-wrapper {
width: 100%;
height: 100%;
display: flex;
justify-content: center;
align-items: center;
position: relative;
padding: 20px;
}

.zoom-content {
max-width: 100%;
max-height: 100%;
display: flex;
justify-content: center;
align-items: center;
}

#zoomViewer img, #zoomViewer video {
max-width: 90vw;
max-height: 85vh;
object-fit: contain;
border-radius: 4px;
box-shadow: 0 0 20px rgba(0,0,0,0.5);
}

#zoomText {
width: 80%;
max-width: 600px;
background: #fff;
color: #000;
padding: 20px;
border-radius: 8px;
max-height: 80vh;
overflow-y: auto;
line-height: 1.6;
text-align: center;
}

.close-zoom {
position: absolute;
top: 15px;
right: 20px;
color: #fff;
font-size: 40px;
cursor: pointer;
z-index: 200001;
background: rgba(0,0,0,0.5);
width: 50px;
height: 50px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
line-height: 1;
}
.close-zoom:hover { background: #FFD700; color: #000; }

.zoom-nav {
position: absolute;
top: 50%;
transform: translateY(-50%);
color: #fff;
font-size: 50px;
padding: 20px;
cursor: pointer;
z-index: 200001;
user-select: none;
}
.zoom-nav:hover { color: #FFD700; }
.zoom-prev { left: 10px; }
.zoom-next { right: 10px; }

/* ========================================= */
/* THANK YOU OVERLAY
/* ========================================= */
#thankYouOverlay {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.85);
backdrop-filter: blur(8px);
z-index: 100002;
justify-content: center;
align-items: center;
opacity: 0;
transition: opacity 0.4s ease-in-out;
}

#thankYouOverlay.active {
display: flex;
opacity: 1;
}

.thank-you-card {
background: linear-gradient(135deg, #ffffff, #fffef0);
width: 90%;
max-width: 500px;
padding: 50px 40px;
border-radius: 24px;
text-align: center;
border: 3px solid #FFD700;
box-shadow: 0 25px 60px rgba(255, 215, 0, 0.3);
position: relative;
overflow: hidden;
transform: scale(0.8);
animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes popIn {
0% { transform: scale(0.5); opacity: 0; }
70% { transform: scale(1.1); opacity: 1; }
100% { transform: scale(1); }
}

.thank-title {
font-family: 'Arial', sans-serif;
font-size: 32px;
font-weight: 800;
color: #000000;
margin: 0 0 20px 0;
letter-spacing: -0.5px;
line-height: 1.2;
}

.thank-msg {
font-size: 18px;
color: #444;
line-height: 1.6;
margin-bottom: 0;
font-weight: 500;
}

/* ========================================= */
/* COMING SOON SECTION STYLES
/* ========================================= */
#comingSoonSection {
display: none;
width: 100%;
max-width: 1400px;
margin: 0 auto;
padding: 20px 20px;
background: #fff;
text-align: center;
min-height: 100dvh;
flex-direction: column;
justify-content: center;
align-items: center;
}
.cs-title {
font-size: 4rem;
color: #ddd;
font-weight: 800;
text-transform: uppercase;
letter-spacing: 5px;
margin-bottom: 20px;
}
.cs-desc {
font-size: 1.2rem;
color: #666;
font-weight: 500;
}

/* ========================================= */
/* ABOUT US PAGE STYLES
/* ========================================= */
#aboutPage {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #000000;
z-index: 200000;
flex-direction: column;
overflow-y: auto;
opacity: 0;
transition: opacity 0.4s ease;
}

#aboutPage.active {
display: flex;
opacity: 1;
}

.about-header {
width: 100%;
padding: 20px;
display: flex;
justify-content: space-between;
align-items: center;
border-bottom: 1px solid #222;
background: #000;
position: sticky;
top: 0;
z-index: 10;
}

.about-close-icon {
color: #fff;
font-size: 30px;
cursor: pointer;
padding: 5px;
transition: color 0.3s;
}

.about-close-icon:hover {
color: #FFD700;
}

.about-content-wrapper {
max-width: 700px;
width: 90%;
margin: 40px auto;
color: #fff;
text-align: center;
}

.about-title {
font-family: 'Arial', sans-serif;
font-size: 2.5rem;
color: #FFD700;
font-weight: 800;
text-transform: uppercase;
margin-bottom: 30px;
letter-spacing: 1px;
}

.about-intro {
font-size: 1.1rem;
line-height: 1.6;
color: #ddd;
margin-bottom: 40px;
}

.about-core-values {
text-align: left;
margin-bottom: 40px;
}

.value-item {
display: flex;
align-items: flex-start;
margin-bottom: 25px;
}

.value-icon {
color: #FFD700;
font-size: 20px;
margin-right: 15px;
flex-shrink: 0;
margin-top: 2px;
}

.value-content h4 {
font-size: 1.2rem;
color: #fff;
margin: 0 0 5px 0;
font-weight: 700;
}

.value-content p {
font-size: 0.95rem;
color: #aaa;
margin: 0;
line-height: 1.5;
}

.about-closing {
font-size: 1rem;
line-height: 1.6;
color: #ccc;
margin-top: 40px;
padding-top: 30px;
border-top: 1px solid #333;
}

.about-action-btn {
margin-top: 30px;
display: inline-block;
padding: 12px 35px;
background: #FFD700;
color: #000;
text-decoration: none;
font-weight: 700;
border-radius: 30px;
transition: transform 0.2s, box-shadow 0.2s;
cursor: pointer;
border: none;
font-size: 1rem;
}

.about-action-btn:hover {
transform: scale(1.05);
box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
color: #000;
}

/* ========================================= */
/* CONTACT US PAGE STYLES
/* ========================================= */
#contactPage {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #000000;
z-index: 200000;
flex-direction: column;
overflow-y: auto;
opacity: 0;
transition: opacity 0.4s ease;
}

#contactPage.active {
display: flex;
opacity: 1;
}

.contact-header {
width: 100%;
padding: 20px;
display: flex;
justify-content: space-between;
align-items: center;
border-bottom: 1px solid #222;
background: #000;
position: sticky;
top: 0;
z-index: 10;
}

.contact-content-wrapper {
max-width: 800px;
width: 90%;
margin: 40px auto;
color: #fff;
}

.contact-title {
font-family: 'Arial', sans-serif;
font-size: 2.2rem;
color: #FFD700;
font-weight: 800;
text-transform: uppercase;
margin-bottom: 20px;
letter-spacing: 1px;
}

.contact-intro {
font-size: 1.1rem;
color: #ddd;
margin-bottom: 40px;
line-height: 1.5;
}

/* Two Column Layout for Contact */
.contact-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 40px;
margin-bottom: 40px;
}

@media (max-width: 768px) {
.contact-grid {
grid-template-columns: 1fr;
gap: 30px;
}
}

.contact-info-section h3 {
color: #fff;
font-size: 1.2rem;
border-bottom: 1px solid #FFD700;
padding-bottom: 10px;
margin-bottom: 20px;
}

.contact-info-item {
display: flex;
align-items: flex-start;
margin-bottom: 20px;
color: #ccc;
}

.contact-info-icon {
color: #FFD700;
margin-right: 15px;
flex-shrink: 0;
width: 24px;
text-align: center;
margin-top: 3px;
}

.contact-info-text {
font-size: 0.95rem;
line-height: 1.4;
}

.contact-info-text strong {
display: block;
color: #fff;
margin-bottom: 4px;
}

.contact-info-link {
color: #FFD700;
text-decoration: none;
transition: color 0.2s;
}

.contact-info-link:hover {
color: #fff;
text-decoration: underline;
}

/* Contact Form Styles */
.contact-form-section {
background: #111;
padding: 25px;
border-radius: 15px;
border: 1px solid #222;
}

.form-group {
margin-bottom: 20px;
}

.form-group label {
display: block;
font-size: 0.9rem;
color: #aaa;
margin-bottom: 8px;
}

.form-group input, .form-group textarea, .form-group select {
width: 100%;
background: #000;
border: 1px solid #333;
color: #fff;
padding: 12px;
border-radius: 8px;
font-size: 1rem;
font-family: inherit;
transition: border-color 0.3s, box-shadow 0.3s;
box-sizing: border-box;
}

.form-group input:focus, .form-group textarea:focus, .form-group select:focus {
outline: none;
border-color: #FFD700;
box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
}

.form-group textarea {
resize: vertical;
min-height: 120px;
}

.contact-submit-btn {
width: 100%;
padding: 14px;
background: #FFD700;
color: #000;
border: none;
border-radius: 30px;
font-size: 1.1rem;
font-weight: 700;
text-transform: uppercase;
cursor: pointer;
transition: transform 0.2s, background 0.2s, box-shadow 0.2s;
}

.contact-submit-btn:hover {
background: #fff;
box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
transform: translateY(-2px);
}

.contact-submit-btn:active {
transform: translateY(0);
}

/* ========================================= */
/* MODAL (POPUP) STYLES
/* ========================================= */
#orderModal {
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background-color: #ffffff;
z-index: 9999;
flex-direction: column;
overflow-y: auto;
scrollbar-width: none;
-ms-overflow-style: none;
}
#orderModal::-webkit-scrollbar { display: none; }
#orderModal.active { display: flex; }
.close-modal {
align-self: flex-end;
font-size: 30px;
padding: 20px 30px;
cursor: pointer;
color: #333;
font-weight: bold;
z-index: 10000;
}
.modal-content-wrapper {
display: flex;
flex-direction: column;
align-items: center;
max-width: 450px;
width: 90%;
margin: 0 auto;
padding: 20px;
text-align: center;
}
.modal-left { width: 100%; }
.modal-cardMedia {
position: relative;
height: 400px;
background: #f1f1f1;
border-radius: 20px;
overflow: hidden;
margin-bottom: 20px;
flex-shrink: 0;
transition: height 0.3s ease;
border: 1px solid #000;
}
.modal-cardMedia img, .modal-cardMedia video, .modal-cardMedia .textSlide {
width: 100%;
object-fit: cover;
display: none;
}
.modal-cardMedia .textSlide {
display: none;
padding: 30px;
box-sizing: border-box;
background: #f8f9fa;
height: 400px;
overflow-y: auto;
position: absolute;
top: 0;
left: 0;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
text-align: center;
}
.modal-cardMedia .backBtn { display: none !important; bottom: 20px; z-index: 20; }
.modal-leftArrow, .modal-rightArrow { display: none; }
.modal-right { width: 100%; text-align: center; }
.modal-right h2 { font-size: 28px; margin: 0 0 5px; font-weight: 700; }
.modal-right .price { font-size: 24px; color: #FFD700; margin-bottom: 20px; font-weight: 700; }
.modal-form label {
display: block;
margin-top: 15px;
font-weight: 600;
font-size: 14px;
text-align: left;
padding-left: 10px;
}
.modal-form input {
width: 100%;
padding: 12px;
margin-top: 5px;
border: 1px solid #ccc;
border-radius: 12px;
font-size: 16px;
text-align: center;
background: #f9f9f9;
}

.qty-wrapper {
display: flex;
align-items: center;
justify-content: center;
margin-top: 5px;
gap: 5px;
}
.qty-btn {
width: 40px;
height: 42px;
border: 1px solid #ddd;
background: #fff;
border-radius: 10px;
font-size: 20px;
color: #333;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.2s;
}
.qty-btn:hover {
background: #FFD700;
border-color: #FFD700;
color: #000;
}
.qty-wrapper .modal-qty {
width: 60px !important;
padding: 10px 5px !important;
margin: 0 !important;
border: 1px solid #ddd;
border-radius: 10px;
text-align: center;
font-weight: 600;
-moz-appearance: textfield;
background: #fff;
}
.qty-wrapper .modal-qty::-webkit-outer-spin-button,
.qty-wrapper .modal-qty::-webkit-inner-spin-button {
-webkit-appearance: none;
margin: 0;
}

.modal-waBtn {
width: 100%;
margin-top: 25px;
padding: 15px;
background: linear-gradient(45deg, #25D366, #128C7E);
color: white;
border: none;
border-radius: 12px;
font-size: 18px;
font-weight: bold;
cursor: pointer;
transition: transform 0.2s;
}
.modal-waBtn:hover {
transform: scale(1.02);
}
.modal-waBtn:disabled { background-color: #e9ecef; cursor: not-allowed; transform: none; }
@media (max-width: 768px) {
.modal-content-wrapper { max-width: 90%; }
.modal-cardMedia { height: 300px; }
}

/* ========================================= */
/* HIGHLIGHTED SHIPPING SLIDE STYLES
/* ========================================= */
.shipping-highlight {
width: 100%;
height: 100%;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
text-align: center;
background: #000000;
color: #ffffff;
padding: 20px;
box-sizing: border-box;
border-radius: 8px;
}
.sh-title {
color: #FFD700;
font-size: 17px;
font-weight: 800;
text-transform: uppercase;
margin-bottom: 20px;
border-bottom: 2px solid #FFD700;
padding-bottom: 8px;
width: 90%;
letter-spacing: 0.5px;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.sh-item {
margin: 12px 0;
font-size: 13px;
color: #ddd;
line-height: 1.4;
width: 90%;
}
.sh-highlight-text {
color: #FFD700;
font-weight: bold;
font-size: 15px;
display: block;
margin-bottom: 5px;
text-shadow: 0px 1px 2px rgba(0,0,0,0.5);
}
.sh-footer {
margin-top: 20px;
font-size: 13px;
color: #aaa;
font-style: italic;
}

/* ========================================= */
/* TOAST NOTIFICATION
/* ========================================= */
.toast-notification {
position: fixed;
bottom: 30px;
left: 50%;
transform: translateX(-50%) translateY(20px);
background-color: #333;
color: #fff;
padding: 14px 28px;
border-radius: 50px;
box-shadow: 0 5px 15px rgba(0,0,0,0.2);
font-size: 14px;
font-weight: 500;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
z-index: 100000;
white-space: nowrap;
}
.toast-notification.show {
opacity: 1;
visibility: visible;
transform: translateX(-50%) translateY(0);
}

/* ========================================= */
/* MOBILE SPECIFIC TWEAKS
/* ========================================= */
@media(max-width: 768px) {
#productContainer {
gap: 20px;
padding-top: 95px;
padding-bottom: 110px;
}
.productCard {
width: 85%;
max-width: 320px;
min-height: 480px;
}
.page-nav-wrapper { right: 10px; bottom: 20px; gap: 10px; }
.nav-btn { width: 50px; height: 50px; font-size: 18px; }

.marquee-wrapper {
height: 140px;
}
.marquee-item {
width: 110px;
}
.m-img {
height: 65px;
}

.mini-header-top {
height: 45px;
}

.about-title {
font-size: 1.8rem;
}
.about-content-wrapper {
width: 85%;
margin: 20px auto;
}

.contact-title {
font-size: 1.8rem;
}
.contact-content-wrapper {
width: 90%;
margin: 20px auto;
}
}
</style>
</head>

<body class="landing-mode">

<!-- ================= PRELOADER ================= -->
<div id="preloader">
<div class="preloader-content">
<div class="spinner"></div>
<div class="preloader-brand">MAK360</div>
<div class="preloader-msg">PREPARING YOUR STORE...</div>
</div>
</div>

<!-- ================= MINI STICKY HEADER (NO CONTACT/ABOUT) ================= -->
<div id="miniStickyHeader" class="mini-header">
<div class="mini-header-top">
<!-- CONTROLS (LEFT) -->
<div class="top-controls-wrapper-mini">
<!-- Home Button -->
<div class="home-btn-wrapper" onclick="forceHardReset()" title="Force Refresh">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
</div>
</div>

<!-- MINI MENU (RIGHT - CATEGORIES ONLY) -->
<div class="mini-menu-wrapper">
<button id="miniMenuBtn" class="mini-menu-btn" title="Menu">‚ò∞</button>
<div id="miniMenuDropdown" class="mini-menu-dropdown">
<!-- CATEGORIES WILL BE INJECTED HERE BY JS -->
<div id="miniMenuCategoryList"></div>
<!-- About/Contact Us Removed from Mini Menu -->
</div>
</div>
</div>
</div>

<!-- 0. CONTROLS WRAPPER (TOP LEFT FIXED) -->
<div class="top-controls-wrapper">
<!-- Home Button -->
<div class="home-btn-wrapper" onclick="forceHardReset()" title="Force Refresh">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
</div>
</div>

<!-- 0.5 NAVIGATION LINKS (TOP RIGHT FIXED - LANDING PAGE ONLY) -->
<div class="nav-links-wrapper">
<a href="#" class="nav-link" onclick="openAboutPage(); return false;">About Us</a>
<a href="#" class="nav-link" onclick="openContactPage(); return false;">Contact Us</a>
</div>

<!-- 1. COVER HEADER SECTION -->
<div class="cover-container">
<div class="hero-wrapper">
<div class="hero-group">
<div class="logo-box">
<span class="part-mak">MAK</span>
<span class="part-360">360</span>
</div>
<div class="subtitle-wrapper">
<div class="double-line top-line"></div>
<div class="subtitle-text">CLICK.SHOP.ENJOY</div>
<div class="double-line bottom-line"></div>
</div>

<button class="lets-shop-btn" onclick="scrollToProducts()">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="color: #fff;"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
<span>Let's Shop</span>
<span class="lets-shop-arrow">‚ñº</span>
</button>

<div class="marquee-wrapper">
<div id="marqueeTrack" class="marquee-track">
</div>
</div>
</div>
</div>
</div>

<div class="page-nav-wrapper">
<button id="navUp" class="nav-btn disabled" onclick="navigate('up')">‚ñ≤</button>
<button id="navDown" class="nav-btn" onclick="navigate('down')">‚ñº</button>
</div>

<div id="productContainer"></div>

<div id="comingSoonSection">
<h1 class="cs-title">Coming Soon...</h1>
<p class="cs-desc">We are adding amazing products for this category. Stay tuned!</p>
<button class="lets-shop-btn" style="margin-top: 30px; display:inline-flex;" onclick="resetToAll()">Back to All Products</button>
</div>

<div id="orderModal">
<div class="close-modal">&times;</div>

<div class="modal-content-wrapper">
<div class="modal-left">
<div class="modal-cardMedia">
<img class="modal-img">
<video class="modal-vid" loop autoplay playsinline></video>
<div class="modal-textSlide"></div>
<div class="leftArrow modal-leftArrow">‚Äπ</div>
<div class="rightArrow modal-rightArrow">‚Ä∫</div>
<button class="backBtn modal-backBtn">Back to Image</button>
</div>
</div>

<div class="modal-right">
<h2 class="modal-title"></h2>
<div class="price modal-price"></div>

<div class="form modal-form">
<label>Name</label>
<input class="modal-name">

<label>Address</label>
<input class="modal-address">

<label>Phone</label>
<input class="modal-phone">

<label>Quantity</label>
<div class="qty-wrapper">
<button type="button" class="qty-btn minus">-</button>
<input type="number" class="modal-qty" value="1" min="1" readonly>
<button type="button" class="qty-btn plus">+</button>
</div>

<p style="margin-top: 15px; font-weight: bold;">Total: Rs <span class="modal-total">0</span></p>

<button class="modal-waBtn" disabled>Order on WhatsApp</button>
</div>
</div>
</div>
</div>

<!-- ZOOM VIEWER OVERLAY -->
<div id="zoomViewer" class="zoom-viewer">
<div class="close-zoom" onclick="closeZoom()">&times;</div>

<div class="zoom-nav zoom-prev" onclick="navigateZoom(-1)">&#10094;</div>

<div class="zoom-content-wrapper">
<div class="zoom-content" id="zoomContent">
<img id="zoomImg">
<video id="zoomVid" playsinline loop></video>
<div id="zoomText"></div>
</div>
</div>

<div class="zoom-nav zoom-next" onclick="navigateZoom(1)">&#10095;</div>
</div>

<!-- THANK YOU OVERLAY -->
<div id="thankYouOverlay">
<div class="thank-you-card">
<h2 class="thank-title">Thank you for your order! üéâ</h2>
<p class="thank-msg">Your order has been successfully received.<br>Our team will contact you shortly for confirmation and delivery details.<br>If you need any help, feel free to message us anytime. üòä</p>
</div>
</div>

<!-- ABOUT US PAGE OVERLAY -->
<div id="aboutPage">
<div class="about-header">
<!-- Close Button -->
<div class="about-close-icon" onclick="closeAllOverlays();">&times;</div>
<!-- Home Icon Button -->
<div class="home-btn-wrapper" onclick="closeAllOverlays(); resetToAll();" title="Back to Home" style="position: relative; background: transparent; border: none; box-shadow: none;">
<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
</div>
</div>

<div class="about-content-wrapper">
<h1 class="about-title">About Us</h1>

<div class="about-intro">
Welcome to MAK360 Store, your trusted destination for quality products and a seamless online shopping experience. Our mission is to provide customers with reliable, affordable, and modern solutions that make their lives easier.
</div>

<div class="about-core-values">
<div class="value-item">
<div class="value-icon">‚úî</div>
<div class="value-content">
<h4>Quality Products</h4>
<p>We offer carefully selected items that meet high-quality standards.</p>
</div>
</div>
<div class="value-item">
<div class="value-icon">‚úî</div>
<div class="value-content">
<h4>Fast & Secure Delivery</h4>
<p>Our logistics partners ensure timely and secure delivery to your doorstep.</p>
</div>
</div>
<div class="value-item">
<div class="value-icon">‚úî</div>
<div class="value-content">
<h4>Customer Satisfaction</h4>
<p>Your satisfaction is our top priority. From product selection to after-sales support, we are always available to assist you.</p>
</div>
</div>
</div>

<div class="about-closing">
<p>Since our launch, we have grown steadily with support of thousands of satisfied customers. We continue to expand our product range and improve our services every day.</p>
<br>
<p><strong>Thank you for choosing MAK360 Store!</strong><br>We look forward to serving you.</p>
</div>

<button class="about-action-btn" onclick="closeAllOverlays(); resetToAll();">Back to Home</button>
</div>
</div>

<!-- CONTACT US PAGE OVERLAY -->
<div id="contactPage">
<div class="contact-header">
<!-- Close Button -->
<div class="about-close-icon" onclick="closeAllOverlays();">&times;</div>
<!-- Home Icon Button -->
<div class="home-btn-wrapper" onclick="closeAllOverlays(); resetToAll();" title="Back to Home" style="position: relative; background: transparent; border: none; box-shadow: none;">
<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
</div>
</div>

<div class="contact-content-wrapper">
<h1 class="contact-title">Contact Us</h1>

<div class="contact-intro">
We‚Äôre here to help! Whether you have questions about a product, need help with an order, or want general information, our support team is ready to assist.
</div>

<div class="contact-grid">
<!-- Contact Info Section -->
<div class="contact-info-section">
<h3>Get In Touch</h3>

<div class="contact-info-item">
<div class="contact-info-icon">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
</div>
<div class="contact-info-text">
<strong>üìç Address</strong>
Office # 5, Nehal Palace,<br>Block 13D, Gulshan e Iqbal - Karachi
</div>
</div>

<div class="contact-info-item">
<div class="contact-info-icon">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
</div>
<div class="contact-info-text">
<strong>üìû WhatsApp</strong>
<a href="https://wa.me/923120380605" class="contact-info-link">+92 312 0380605</a>
<div style="margin-top: 4px; color: #888; font-size: 0.85rem;">Available Mon‚ÄìSat, 10AM ‚Äì 8PM</div>
</div>
</div>

<div class="contact-info-item">
<div class="contact-info-icon">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
</div>
<div class="contact-info-text">
<strong>üìß Email</strong>
<a href="mailto:mak360store@gmail.com" class="contact-info-link">mak360store@gmail.com</a>
</div>
</div>

<div class="contact-info-item">
<div class="contact-info-icon">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
</div>
<div class="contact-info-text">
<strong>üïí Working Hours</strong>
Monday ‚Äì Saturday: 10:00 AM ‚Äì 08:00 PM<br>
Sunday: Closed
</div>
</div>
</div>

<!-- Contact Form Section -->
<div class="contact-form-section">
<div class="form-group">
<label for="contactName">Full Name</label>
<input type="text" id="contactName" placeholder="Enter your name" autocomplete="name">
</div>

<div class="form-group">
<label for="contactEmail">Email</label>
<input type="email" id="contactEmail" placeholder="Enter your email" autocomplete="email">
</div>

<div class="form-group">
<label for="contactPhone">Mobile/Whatsapp</label>
<input type="tel" id="contactPhone" placeholder="Enter your phone number" autocomplete="tel">
</div>

<div class="form-group">
<label for="contactMessage">Message</label>
<textarea id="contactMessage" placeholder="How can we help you?"></textarea>
</div>

<button class="contact-submit-btn" onclick="submitContactForm()">Submit</button>
</div>
</div>
</div>

<div id="toast" class="toast-notification">Order Saved!</div>

<!-- 9. JAVASCRIPT LOGIC -->
<script>
// IMPORTANT: Replace this URL with your Google Apps Script URL for Contact Form
const CONTACT_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx8dNof5vdtUr9uMSzHhs7BtGdA_BWmXZwsJYbMhajt-JoBUdGjVlYToqLhCTLYFNiNmQ/exec";

const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzr4SQWPcJFN2rJ3BrHBI1clHKBT39Vm7ldry4b1t-aFNsJ9ebVrVh6zsb1FJ5qyk_t/exec";
const VISITOR_TRACKER_URL = "https://script.google.com/macros/s/AKfycbz2dANcMTZaCsTucRR4qcHRTKfFi_4HHqZ5APKlMMYjJSvQ-5tZMcurRPizvC3ijdQ.exec";

/* --- SCROLL RESTORATION FIX --- */
if ('scrollRestoration' in history) {
history.scrollRestoration = 'manual';
}

/* --- MEMORY VARIABLES (LocalStorage) --- */
const STORAGE_KEY = 'MAK360_LastScrollY';
const DB_KEY = 'MAK360_ProductDB';
const CAT_DB_KEY = 'MAK360_Categories';
let currentCategoryFilter = 'All';
let isNavigating = false;
let orderJustPlaced = false;

/* --- APP MODE FULLSCREEN LOGIC --- */
let exitFullscreenTimeout;

function toggleFullScreen(forceOpen = false) {
if (!document.fullscreenElement && forceOpen) {
const doc = document.documentElement;
if (doc.requestFullscreen) doc.requestFullscreen();
else if (doc.webkitRequestFullscreen) doc.webkitRequestFullscreen();
else if (doc.msRequestFullscreen) doc.msRequestFullscreen();
} else if (document.fullscreenElement && !forceOpen) {
if (document.exitFullscreen) document.exitFullscreen();
else if (doc.webkitExitFullscreen) doc.webkitExitFullscreen();
else if (doc.msExitFullscreen) doc.msExitFullscreen();
}
}

document.addEventListener('fullscreenchange', () => {
if (!document.fullscreenElement) {
console.log("Exited Fullscreen. Waiting 20 seconds...");
showToast("Switching to Browser Mode...");
clearTimeout(exitFullscreenTimeout);
exitFullscreenTimeout = setTimeout(() => {
toggleFullScreen(true);
showToast("Returning to App Mode...");
}, 20000);
} else {
clearTimeout(exitFullscreenTimeout);
}
});

/* ========================================= */
/* SEED DATA (DEFAULT PRODUCTS) --- */
const defaultProducts = [
{
title: "Wall Hanging & Table Stand Frames",
desc: "Available In Different Sizes",
price: 1050,
itemCode: "ITM00004",
supplyCode: "A001",
category: "Sentiments",
slides: [
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836781/mak360/u0b236oliiqnmwakvmwz.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836782/mak360/v61etvhj1ffnxfrqolnh.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836783/mak360/mlv26ymxndqf2qwxzfin.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836784/mak360/s3lccbgjoolguuz9pnxm.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836785/mak360/jsayi5wuhswnssffutcw.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836786/mak360/uuimogojph7km9ubfkr2.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836787/mak360/rlmjmcy4coy9reg7h9el.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836788/mak360/lgesefuxnizpezz0zyxf.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836788/mak360/thauike2xx5kvzuejdmp.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836789/mak360/nyz1qndulrlkz8cklbm6.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836790/mak360/o3uyxsvsgiyth19xsmiz.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836791/mak360/gc0uz3skta0m0lnfk4d4.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836792/mak360/gxii91fv8iiuxnzwvcyl.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836793/mak360/jsavxuxzzjfs1mthre5a.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836793/mak360/ndxpf4abow8wrhk5xg89.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836794/mak360/gjtb9tnto3gizi21zbh9.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836795/mak360/ibzfq9mfcgpffll5epz8.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836797/mak360/tdazgjswuwnxuipm6fh2.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836798/mak360/jupgp0gtsmx7yjgrdqln.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836800/mak360/el0uriv3msgibrtlicn0.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836801/mak360/auomz5spydxphefdyjfv.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836802/mak360/frie1miilrpvixmspzno.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836803/mak360/hucrg5z2nzcchr0tpryh.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836804/mak360/xjj6jcymibexz4xltxni.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836806/mak360/jljn8epnowi0wvc13y36.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836807/mak360/feegwgmu5wwgxlaiqx0x.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836808/mak360/wmji41wzpg8b0hvmviqk.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836809/mak360/gmhgc6ajzuu059xk1x2l.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836810/mak360/v9lmdkcbpr0fsuwiltwu.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836812/mak360/btyabjzudbssshkgo3el.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836813/mak360/fwesa4f02z1h2vezzf9y.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836815/mak360/n8hqgicixulmnh1rklar.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836816/mak360/ej3kna663lc1dvrmuwtp.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836817/mak360/g8cbrci3sclhrmrv6sfe.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836819/mak360/zlivnrskkj6zykpc2pqd.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836820/mak360/r9tjiqe04ddglllj9ga7.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836821/mak360/n9b0jqoujs7oaunlxwwx.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836822/mak360/yuj4x3z8iiicw2gnjz7v.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768836824/mak360/ownf324klsmrxwugzj4r.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768837081/mak360/y170ubpxffydjcdktmdk.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768837082/mak360/sropyz6vhzcmmkdegds3.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768837082/mak360/i2apozdw4b63dycljldd.jpg"},
{ type: "image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768837083/mak360/tlodjsoal4inyrtzts8e.jpg"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836874/mak360/qplomklzdqpqwk6kqtld.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836897/mak360/hgnecgqkgtxqlzmlczpy.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836925/mak360/etl53jy8czcjxnuilvkm.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836933/mak360/msbmg0cdymgygwbebc5m.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836939/mak360/ctp5lof0xbdb13ehhafk.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836944/mak360/g85cxtfwhxthj8o7vdxl.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836954/mak360/enjgujjjvkb5ka2v4k6j.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836967/mak360/tgbjtgfix57ncp1rt3wb.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836983/mak360/es0do8vk2rlwa1ohrgli.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768836986/mak360/criryadssjcapgdvis7u.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768837006/mak360/qoaf2tkrdhkgpao1rvx2.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768837072/mak360/nwr4v96w9rxvz9utnwic.mp4"},
{ type: "video", url: "https://res.cloudinary.com/dxj58qjsd/video/upload/v1768837075/mak360/fb991xxgzs0zmnxqlsyt.mp4"},
{ type: "text", text: "Customized Wall Hanging & Table Stand Frames\n\nSize 4x6 5x7 6x8 8x10: 8x12: 10x12: 12x16: \n\nMaking time: 1-2 Days" }
]
},
{
title:"Name Locket",
desc:"Gold/Silver Plated both available",
price:500,
itemCode:"ITM00003",
supplyCode:"A001",
category:"Fashion",
slides: [
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832735/mak360/tcykaltd7mpm97ppwxmo.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832735/mak360/kxpmm3omxnv0ygkr1knp.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832736/mak360/nwchhrxfsvkqxu8vubws.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832737/mak360/dqvlzmk5t8f5o3c7xs2t.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832738/mak360/hc9ew4f0vubgmbczx25m.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832739/mak360/cdfsyvah26ret7vnpgpd.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832739/mak360/khzoj8whwbpp3xvybpic.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832740/mak360/dmjpjpxomg5vwyfsqpky.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832741/mak360/yjagjlovv6wmn6dkaepd.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832742/mak360/cwgagjaebpktcczatmme.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832743/mak360/palemjqygu27tnzyzipt.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832744/mak360/vlzye2ghhrm6zb8xue8q.jpg"},
{type:"image", url: "https://res.cloudinary.com/dxj58qjsd/image/upload/v1768832744/mak360/uzjddxu978g0fjuchr4j.jpg"},
{type:"text", text: "Name Locket üåü Ready In 3-4 Daysüåü With Box üéÅüåü Gold/Silver Plated both available üåü Full Advance Payment"}
]
},
{
title:"M K Shoes",
desc:"New Arrivals",
price:2400,
itemCode:"ITM00002",
supplyCode:"A001",
category:"Shoes",
slides:[
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829106/mak360/rezhlhbful5eewno4kgh.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829107/mak360/ddt02w0zdhfsncwrmzk8.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829108/mak360/ce9hoqnxzgsajri0brum.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829109/mak360/ca3zh4gkrd3fgiytvrx3.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829110/mak360/yclridxqnbs7bnsri7lp.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829111/mak360/yrcwgz7vg55wmjeap0ty.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829112/mak360/rq7pcjxaqcgawaxa6tla.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768829113/mak360/yotsbnjir9bjbc9elb0f.jpg"},
{type:"text",text:"Size 36 37 38 39 40 41 42 With Brand Box üì¶"}]},
{
title:"Handbags For Womens",
desc:"BURBERRY Crossbody - HIGH QUALITY",
price:1500,
itemCode: "ITM00001",
supplyCode: "A001",
category: "Handbags",
slides:[
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822726/mak360/ziyd5djmuwzvq7tmxocp.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822726/mak360/lu4gejncnayvwgpyrory.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822728/mak360/m9rccf0klvmw0m1fhpoj.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822728/mak360/epfhpw6dbigaslwboqsh.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822729/mak360/hzvuqagwdjgvtu8lyjdm.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822731/mak360/tmjfhr0mquoiqdinvy1u.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822731/mak360/nlv7xarlf7qhc8pojsn4.jpg"},
{type:"image",url:"https://res.cloudinary.com/dxj58qjsd/image/upload/v1768822733/mak360/segpvy9ssffyz8w1j7ni.jpg"},
{type:"video",url:"https://res.cloudinary.com/dxj58qjsd/video/upload/v1768822726/mak360/rbdvkxn6h5xqxnmz0avo.mp4"},
{type:"text",text:"üíñ NEW ARRIVAL üíñ\n‚ú®HIGH QUALITY ‚ú®\nüíñBURBERRY Crossbody Handbags For Womensüíñ\n‚ú® Size : Large\n‚ú® Long Belt\n‚ú® Good Capacity\n‚ú® Colors :7\n‚ú® Stylish & Unique"}
]
},
{title:"PAGAL", desc:"grat", price:1500, itemCode:"ITM00006", supplyCode:"A001", category:"Jewelries", slides:[{type:"image",url:"https://i.ibb.co/0qwgqXy/sample2.jpg"},{type:"video",url:"https://www.w3schools.com/html/movie.mp4"}, {type:"text",text:"üî• PREMIUM WATCH üî•\n‚úî Stylish\n‚úî Limited Edition"}]}
];

const defaultCategories = [
{ name: "All", visible: true, deletable: false, order: 1 },
{ name: "Shoes", visible: true, deletable: true, order: 7 },
{ name: "Handbags", visible: true, deletable: true, order: 3 },
{ name: "Fashion", visible: true, deletable: true, order: 5 },
{ name: "Jewelries", visible: true, deletable: true, order: 2 },
{ name: "Sentiments", visible: true, deletable: true, order: 6 },
{ name: "Cloths", visible: true, deletable: true, order: 4 },
{ name: "Shawls", visible: true, deletable: true, order: 8 },
{ name: "Watches", visible: true, deletable: true, order: 9 },
{ name: "Bedsheets", visible: true, deletable: true, order: 10 },
{ name: "Computer", visible: true, deletable: true, order: 11 },
{ name: "Mobile", visible: true, deletable: true, order: 12 },
{ name: " Kitchen", visible: true, deletable: true, order: 13 },
{ name: "Foods", visible: true, deletable: true, order: 14 },
{ name: "Services", visible: true, deletable: true, order: 15 }
];
var products = [];
var categories = [];
var cart = [];

function loadProducts() {
fetch('products.json')
.then(response => {
if (!response.ok) throw new Error("File not found");
return response.json();
})
.then(data => {
products = data;
console.log("Products loaded from products.json");
renderStore();
})
.catch(() => {
console.log("products.json not found. Using LocalStorage or Defaults.");
const stored = localStorage.getItem(DB_KEY);
if (stored) {
products = JSON.parse(stored);
} else {
products = defaultProducts;
saveProducts();
}
products.forEach(p => {
if (typeof p.isHidden === 'undefined') p.isHidden = false;
if (typeof p.itemCode === 'undefined') p.itemCode = "N/A";
if (typeof p.supplyCode === 'undefined') p.supplyCode = "N/A";
});
saveProducts();
renderStore();
});
}

function loadCategories() {
const stored = localStorage.getItem(CAT_DB_KEY);
if (stored) {
categories = JSON.parse(stored);
} else {
categories = defaultCategories;
saveCategories();
}
renderCategoryBar();
}

function saveProducts() {
localStorage.setItem(DB_KEY, JSON.stringify(products));
}

function saveCategories() {
localStorage.setItem(CAT_DB_KEY, JSON.stringify(categories));
renderCategoryBar();
}

const clickSound = new Audio('https://cdn.pixabay.com/download/audio/2022/03/09/audio_c8c8a73467.mp3');
clickSound.volume = 0.3; clickSound.preload = 'auto';
const crowdSound = new Audio('https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3');
crowdSound.volume = 1.0; crowdSound.preload = 'auto';

var container=document.getElementById("productContainer");

const SHIPPING_TEXT = "‚ú® Shipping & Return Information\n\nüì¶ Free Delivery ‚Äì Karachi\nCash on Delivery (COD) available within Karachi city.\n\nüöö Nationwide Shipping ‚Äì Pakistan\nRs. 250 delivery charges (Advance Online Payment Required).\n\nüîÑ Easy Return & Exchange\nDamaged, incorrect, or not-as-described items can be returned or exchanged within 3 days of delivery.\nCustomer satisfaction is our priority!";

function processTextSlides(slides) {
let newSlides = [];
const limit = 180;
slides.forEach(slide => {
if (slide.type === 'text') {
const text = slide.text;
for (let i = 0; i < text.length; i += limit) {
newSlides.push({ type: 'text', text: text.substring(i, i + limit) });
}
} else {
newSlides.push(slide);
}
});
return newSlides;
}

function generateMarquee() {
const track = document.getElementById("marqueeTrack");
if(!track) return;
let html = "";
products.forEach((p, index) => {
if(p.isHidden) return;
let imgUrl = "";
if(p.slides.length > 0 && p.slides[0].type === 'image') {
imgUrl = p.slides[0].url;
} else if (p.slides.length > 0 && p.slides[0].type === 'video') {
imgUrl = "https://via.placeholder.com/100x100?text=Video";
} else {
imgUrl = "https://via.placeholder.com/100x100?text=No+Img";
}
let displayPrice = p.price * 1.75;
let priceFormatted = Math.round(displayPrice).toLocaleString('en-PK');
html += `
<div class="marquee-item" onclick="scrollToProductIndex(${index})">
<img class="m-img" src="${imgUrl}" alt="${p.title}">
<div class="m-title">${p.title}</div>
<div class="m-price">Rs ${priceFormatted}</div>
</div>
`;
});
track.innerHTML = html + html + html;
}

function renderStore() {
container.innerHTML = "";
let displayProducts = products;
if (currentCategoryFilter !== "All") {
displayProducts = products.filter(p => p.category === currentCategoryFilter);
}
if (displayProducts.length === 0 && currentCategoryFilter !== "All") {
document.getElementById("comingSoonSection").style.display = "flex";
document.getElementById("productContainer").style.display = "none";
return;
} else {
document.getElementById("comingSoonSection").style.display = "none";
document.getElementById("productContainer").style.display = "flex";
}
generateMarquee();

displayProducts.forEach((p, index)=>{
let realIndex = products.indexOf(p);
if(p.isHidden) return;

let pSlides = processTextSlides(p.slides);
pSlides.push({type:"text", text: SHIPPING_TEXT, isShipping: true});

var card=document.createElement("div");
card.className="productCard";
card.dataset.productIndex = realIndex;
card.dataset.title = p.title;

let basePrice = p.price;
let displayPrice = basePrice * 1.75;
const randomVal = Math.random();
let discountHTML = "";
let oldPrice = 0;
let randomPercent = 0;

if (randomVal < 0.5) {
randomPercent = Math.floor(Math.random() * (15 - 5 + 1) + 5);
oldPrice = displayPrice * (1 + (randomPercent / 100));

let currentPriceFormatted = Math.round(displayPrice).toLocaleString('en-PK');
let oldPriceFormatted = Math.round(oldPrice).toLocaleString('en-PK');

discountHTML = `
<span class="old-price">Rs ${oldPriceFormatted}</span>
<span class="discount-badge">${randomPercent}% OFF</span>
`;

card.innerHTML=`
<div class="cardMedia">
<img class="img">
<video class="vid" loop autoplay playsinline></video>
<div class="textSlide"></div>
<button class="zoomBtn" title="Full Screen View">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>
</button>
<div class="leftArrow">‚ùÆ</div>
<div class="rightArrow">‚ùØ</div>
<button class="backBtn">Back to Image</button>
</div>
<h3>${p.title}</h3>
<p>${p.desc}</p>
<div class="price-container">
<span class="current-price">Rs ${currentPriceFormatted}</span>
 ${discountHTML}
</div>

<div class="action-row">
<button class="orderBtn">Add to Cart</button>
<button class="cardShareBtn">Share</button>
</div>

<div class="internal-codes">
<span>Item: ${p.itemCode || 'N/A'}</span>
<span>Sup: ${p.supplyCode || 'N/A'}</span>
</div>
`;
} else {
let currentPriceFormatted = Math.round(displayPrice).toLocaleString('en-PK');

card.innerHTML=`
<div class="cardMedia">
<img class="img">
<video class="vid" loop autoplay playsinline></video>
<div class="textSlide"></div>
<button class="zoomBtn" title="Full Screen View">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>
</button>
<div class="leftArrow">‚ùÆ</div>
<div class="rightArrow">‚ùØ</div>
<button class="backBtn">Back to Image</button>
</div>
<h3>${p.title}</h3>
<p>${p.desc}</p>
<div class="price-container">
<span class="current-price">Rs ${currentPriceFormatted}</span>
</div>

<div class="action-row">
<button class="orderBtn">Add to Cart</button>
<button class="cardShareBtn">Share</button>
</div>

<div class="internal-codes">
<span>Item: ${p.itemCode || 'N/A'}</span>
<span>Sup: ${p.supplyCode || 'N/A'}</span>
</div>
`;
}

container.appendChild(card);

let slides=pSlides, i=0;
let img=card.querySelector(".img"),
vid=card.querySelector(".vid"),
txt=card.querySelector(".textSlide"),
order=card.querySelector(".orderBtn"),
shareBtn=card.querySelector(".cardShareBtn"),
mediaBox=card.querySelector(".cardMedia"),
backBtn=card.querySelector(".backBtn");

function show(){
img.style.display=vid.style.display=txt.style.display="none";
vid.pause();
mediaBox.classList.remove("text-active");
txt.style.background = "";
txt.style.color = "";

let s=slides[i];
if(s.type==="image"){
img.src=s.url; img.style.display="block"; order.disabled=false;
shareBtn.classList.remove('hidden');
}
else if(s.type==="video"){
vid.src=s.url; vid.style.display="block"; order.disabled=true;
vid.muted = false; vid.load();
setTimeout(() => {
var playPromise = vid.play();
if (playPromise !== undefined) {
playPromise.catch(error => {
card.onclick = () => { vid.muted = false; vid.play(); card.onclick = null; };
});
}
}, 100);
shareBtn.classList.remove('hidden');
}
else{
if(s.isShipping) {
txt.innerHTML = `
<div class="shipping-highlight">
<div class="sh-title">Shipping & Return Information</div>
<div class="sh-item">
<span class="sh-highlight-text">üì¶ Free Delivery ‚Äì Karachi</span>
Cash on Delivery (COD) available within Karachi city.
</div>
<div class="sh-item">
<span class="sh-highlight-text">üöö Nationwide Shipping ‚Äì Pakistan</span>
Rs. 250 delivery charges (Advance Online Payment Required).
</div>
<div class="sh-item">
<span class="sh-highlight-text">üîÑ Easy Return & Exchange</span>
Damaged, incorrect, or not-as-described items can be returned or exchanged within 3 days of delivery.
</div>
<div class="sh-footer">Customer satisfaction is our priority!</div>
</div>
`;
} else {
txt.innerText = s.text;
}
txt.style.display="flex"; order.disabled=true;
mediaBox.classList.add("text-active");
txt.scrollTop = 0;
shareBtn.classList.add('hidden');
}
card.dataset.currentSlide = i;
}
show();
function reset() { i = 0; show(); }
card.reset = reset;

card.querySelector(".leftArrow").onclick=(e)=>{
e.stopPropagation();
i=(i-1+slides.length)%slides.length;
show();
playClickSound();
};
card.querySelector(".rightArrow").onclick=(e)=>{
e.stopPropagation();
i=(i+1)%slides.length;
show();
playClickSound();
};

/* ZOOM BUTTON CLICK LOGIC */
const zoomBtn = card.querySelector(".zoomBtn");
if (zoomBtn) {
zoomBtn.onclick = (e) => {
e.stopPropagation();
e.stopImmediatePropagation();
e.preventDefault();
openZoom(realIndex, i);
};
}

card.querySelector(".orderBtn").onclick = (e) => {
e.stopPropagation();
e.stopImmediatePropagation();
openModal(p, realIndex);
};

shareBtn.onclick = (e) => {
e.stopPropagation();
shareSpecificProduct(realIndex, i);
};

card.addEventListener('click', function() {
shareBtn.classList.remove('hidden');
});
});
}

/* ========================================= */
/* UPDATED: RENDER CATEGORY BAR INTO MENU
/* ========================================= */
function renderCategoryBar() {
const listContainer = document.getElementById("miniMenuCategoryList");
if(!listContainer) return;

listContainer.innerHTML = "";
const sortedCats = [...categories].sort((a, b) => {
if(a.name === "All") return -1;
if(b.name === "All") return 1;
const orderA = a.order !== undefined ? a.order : 999;
const orderB = b.order !== undefined ? b.order : 999;
return orderA - orderB;
});

sortedCats.forEach(cat => {
if(cat.visible) {
const div = document.createElement("div");
div.className = "mini-menu-link" + (currentCategoryFilter === cat.name ? " active" : "");
div.innerText = cat.name;
div.onclick = function() {
switchView(cat.name);
closeMiniMenu();
};
listContainer.appendChild(div);
}
});
}

function switchView(catName) {
currentCategoryFilter = catName;
renderCategoryBar();
playClickSound();
renderStore();
const y = document.getElementById('productContainer').getBoundingClientRect().top + window.pageYOffset - 90;
window.scrollTo({top: y, behavior: 'smooth'});
}

/* ========================================= */
/* UPDATED PAGE NAVIGATION LOGIC (CENTER ROW)
/* ========================================= */

// Define all overlay IDs
const overlayPages = ['aboutPage', 'contactPage'];

// Function to close all overlays INSTANTLY
function closeAllOverlays() {
overlayPages.forEach(pageId => {
const el = document.getElementById(pageId);
if (el) {
el.classList.remove('active');
el.style.display = 'none';
}
});
if (!document.getElementById("orderModal").classList.contains('active')) {
document.body.style.overflow = 'auto';
}
}

// Function to open a specific overlay INSTANTLY
function openOverlay(pageId) {
playClickSound();
closeAllOverlays();
const target = document.getElementById(pageId);
if (target) {
target.style.display = 'flex';
document.body.style.overflow = 'hidden';
setTimeout(() => {
target.classList.add('active');
}, 10);
}
}

function openAboutPage() { openOverlay('aboutPage'); }
function openContactPage() { openOverlay('contactPage'); }
function closeAboutPage() { closeAllOverlays(); }
function closeContactPage() { closeAllOverlays(); }

function resetToAll() {
closeAllOverlays();
var modal = document.getElementById("orderModal");
if(modal.classList.contains('active')) closeModal();
localStorage.removeItem(STORAGE_KEY);
window.scrollTo({ top: 0, behavior: 'auto' });
switchView('All');
}

function forceHardReset() {
const toast = document.getElementById("toast");
toast.innerText = "Refreshing Store...";
toast.classList.add("show");
localStorage.clear();
setTimeout(() => { location.reload(true); }, 500);
}

let scrollTimeout;
function getScrollY() { return window.scrollY || document.documentElement.scrollTop || document.body.scrollTop || 0; }

window.addEventListener('scroll', function() {
var modal = document.getElementById("orderModal");
if(modal.classList.contains('active')) return;
const navWrapper = document.querySelector('.page-nav-wrapper');
let currentScroll = getScrollY();
if (currentScroll < 100) { navWrapper.classList.remove('visible'); }
else { navWrapper.classList.add('visible'); }
if (!isNavigating) {
clearTimeout(scrollTimeout);
scrollTimeout = setTimeout(() => { localStorage.setItem(STORAGE_KEY, currentScroll); }, 300);
}
var cards = document.querySelectorAll(".productCard");
cards.forEach(card => {
var currentSlide = parseInt(card.dataset.currentSlide);
if (currentSlide !== 0) { if (card.reset) card.reset(); }
});
clearTimeout(scrollTimeout);
scrollTimeout = setTimeout(() => { updateNavButtons(); }, 100);

const miniHeader = document.getElementById("miniStickyHeader");
if (!miniHeader) return;
if (currentScroll > 150) {
if (miniHeader.style.display !== 'flex') {
miniHeader.style.display = 'flex';
document.body.classList.add('has-mini-header');
}
} else if (currentScroll < 5) {
if (miniHeader.style.display !== 'none') {
miniHeader.style.display = 'none';
document.body.classList.remove('has-mini-header');
}
}
});

function scrollToProducts() {
toggleFullScreen(true);
if(crowdSound) { crowdSound.currentTime = 0; crowdSound.play().catch(e => console.log(e)); }
document.body.classList.remove('landing-mode');
switchView('All');
setTimeout(() => {
const savedY = parseInt(localStorage.getItem(STORAGE_KEY));
if (savedY && savedY > 300) {
window.scrollTo({ top: savedY, behavior: 'smooth' });
} else {
const productContainer = document.getElementById('productContainer');
const containerTop = productContainer.getBoundingClientRect().top + window.pageYOffset;
window.scrollTo({ top: containerTop - 20, behavior: 'smooth' });
}
}, 100);
}

function playClickSound() {
if(clickSound) {
clickSound.currentTime = 0; clickSound.load();
const playPromise = clickSound.play();
if (playPromise !== undefined) { playPromise.catch(error => console.log("Sound play failed:", error)); }
}
}

function scrollToProductIndex(productIndex) {
if(document.body.classList.contains('landing-mode')) {
if(crowdSound) { crowdSound.currentTime = 0; crowdSound.play().catch(e => console.log(e)); }
document.body.classList.remove('landing-mode');
}
switchView('All');
setTimeout(() => {
const cards = document.querySelectorAll('.productCard');
if(cards[productIndex]) {
const cardRect = cards[productIndex].getBoundingClientRect();
const absoluteTop = window.scrollY + cardRect.top;
const targetY = absoluteTop - 20;
window.scrollTo({ top: targetY, behavior: 'smooth' });
cards[productIndex].style.border = "2px solid #FFD700";
cards[productIndex].style.transform = "scale(1.02)";
setTimeout(() => {
cards[productIndex].style.border = "1px solid #000000";
cards[productIndex].style.transform = "";
}, 1000);
}
}, 200);
}

function navigate(direction) {
var modal = document.getElementById("orderModal");
if(modal.classList.contains('active')) return;
var cards = Array.from(document.querySelectorAll(".productCard"));
if(cards.length === 0) return;
isNavigating = true;

const viewportHeight = window.innerHeight;
const cardHeight = cards[0].offsetHeight; // Assumption: cards are uniform height
const cols = getColumns();

// 1. Identify the row currently closest to center
let centerOfViewport = window.scrollY + (viewportHeight / 2);
let currentCenterIndex = 0;
let minDistance = Infinity;

cards.forEach((card, index) => {
const cardCenter = window.scrollY + card.getBoundingClientRect().top + (cardHeight / 2);
const distance = Math.abs(cardCenter - centerOfViewport);
if (distance < minDistance) {
minDistance = distance;
currentCenterIndex = index;
}
});

// 2. Find the first card in the CURRENT row
// We look backwards from the centered card until the 'top' position changes
let firstCardOfCurrentRow = currentCenterIndex;
const currentRowTop = cards[firstCardOfCurrentRow].getBoundingClientRect().top + window.scrollY;

while (firstCardOfCurrentRow > 0) {
const prevCardTop = cards[firstCardOfCurrentRow - 1].getBoundingClientRect().top + window.scrollY;
// If previous card is roughly on the same row (allow small pixel diff for borders/gaps)
if (Math.abs(prevCardTop - currentRowTop) < 10) {
firstCardOfCurrentRow--;
} else {
break;
}
}

// 3. Determine the target row's first card index
let firstCardOfTargetRow = firstCardOfCurrentRow;

if (direction === 'down') {
firstCardOfTargetRow = firstCardOfCurrentRow + cols;
// Bound check: If we go past the end, clamp to the last card (effectively centering the last row)
if (firstCardOfTargetRow >= cards.length) {
firstCardOfTargetRow = cards.length - 1;
}
} else if (direction === 'up') {
firstCardOfTargetRow = firstCardOfCurrentRow - cols;
// Bound check: If we go before the start, clamp to 0
if (firstCardOfTargetRow < 0) {
firstCardOfTargetRow = 0;
}
}

// 4. Calculate the vertical position to center this row
const targetCard = cards[firstCardOfTargetRow];
const targetRowTop = targetCard.getBoundingClientRect().top + window.scrollY;

// Formula to center the row: RowTop - HalfWindowHeight + HalfCardHeight
let scrollToY = targetRowTop - (viewportHeight / 2) + (cardHeight / 2);

// Smooth scroll
window.scrollTo({ top: scrollToY, behavior: 'smooth' });
playClickSound();

setTimeout(() => {
localStorage.setItem(STORAGE_KEY, scrollToY);
isNavigating = false;
}, 800);
}

function updateNavButtons() {
const navUp = document.getElementById('navUp');
const navDown = document.getElementById('navDown');
const cards = Array.from(document.querySelectorAll(".productCard"));

if (cards.length === 0) return;

const viewportHeight = window.innerHeight;
const cardHeight = cards[0].offsetHeight;
const cols = getColumns();

// Find the row currently centered in the viewport
let centerOfViewport = window.scrollY + (viewportHeight / 2);
let currentCenterIndex = 0;
let minDist = Infinity;

cards.forEach((card, index) => {
const cardCenter = window.scrollY + card.getBoundingClientRect().top + (cardHeight / 2);
const dist = Math.abs(cardCenter - centerOfViewport);
if (dist < minDist) {
minDist = dist;
currentCenterIndex = index;
}
});

// Find first card of current centered row
let firstOfCurrentRow = currentCenterIndex;
const currentRowTop = cards[firstOfCurrentRow].getBoundingClientRect().top + window.scrollY;

while(firstOfCurrentRow > 0) {
const prevRowTop = cards[firstOfCurrentRow - 1].getBoundingClientRect().top + window.scrollY;
if (Math.abs(prevRowTop - currentRowTop) < 10) {
firstOfCurrentRow--;
} else {
break;
}
}

// Check Bounds
// If the first card of the centered row is 0, we can't go up
if (firstOfCurrentRow === 0) {
navUp.classList.add('disabled');
} else {
navUp.classList.remove('disabled');
}

// If (FirstCardIndex + Cols) >= total cards, we are at or past the last row
if (firstOfCurrentRow + cols >= cards.length) {
navDown.classList.add('disabled');
} else {
navDown.classList.remove('disabled');
}
}

function getColumns() {
const cards = document.querySelectorAll(".productCard");
if (cards.length === 0) return 1;
let firstRect = cards[0].getBoundingClientRect();
let cols = 1;
for (let i =1; i < cards.length; i++) {
let currentRect = cards[i].getBoundingClientRect();
if (Math.abs(currentRect.top - firstRect.top) < 10) {
cols++;
} else {
break;
}
}
return cols;
}

/* ================= ZOOM VIEWER LOGIC ================= */
let zoomSlides = [];
let currentZoomIndex = 0;

function openZoom(productIndex, slideIndex) {
const product = products[productIndex];
if (!product) return;
zoomSlides = processTextSlides(product.slides);
zoomSlides.push({ type: "text", text: SHIPPING_TEXT, isShipping: true });
currentZoomIndex = slideIndex;
const viewer = document.getElementById('zoomViewer');
viewer.classList.add('active');
document.body.style.overflow = 'hidden';
showZoomContent();
}

function closeZoom() {
const viewer = document.getElementById('zoomViewer');
const vid = document.getElementById('zoomVid');
vid.pause();
viewer.classList.remove('active');
document.body.style.overflow = 'auto';
}

function showZoomContent() {
const img = document.getElementById('zoomImg');
const vid = document.getElementById('zoomVid');
const txt = document.getElementById('zoomText');
img.style.display = 'none';
vid.style.display = 'none';
txt.style.display = 'none';
vid.pause();

const slide = zoomSlides[currentZoomIndex];

if (slide.type === 'image') {
img.src = slide.url;
img.style.display = 'block';
} else if (slide.type === 'video') {
vid.src = slide.url;
vid.style.display = 'block';
vid.play().catch(e => console.log(e));
} else if (slide.type === 'text') {
if(slide.isShipping) {
txt.innerHTML = `
<div class="shipping-highlight">
<div class="sh-title">Shipping & Return Information</div>
<div class="sh-item">
<span class="sh-highlight-text">üì¶ Free Delivery ‚Äì Karachi</span>
Cash on Delivery (COD) available within Karachi city.
</div>
<div class="sh-item">
<span class="sh-highlight-text">üöö Nationwide Shipping ‚Äì Pakistan</span>
Rs. 250 delivery charges (Advance Online Payment Required).
</div>
<div class="sh-item">
<span class="sh-highlight-text">üîÑ Easy Return & Exchange</span>
Damaged, incorrect, or not-as-described items can be returned or exchanged within 3 days of delivery.
</div>
<div class="sh-footer">Customer satisfaction is our priority!</div>
</div>
`;
} else {
txt.innerText = slide.text;
}
txt.style.display = 'block';
}
}

function navigateZoom(direction) {
if (!zoomSlides.length) return;
currentZoomIndex += direction;
if (currentZoomIndex < 0) {
currentZoomIndex = zoomSlides.length - 1;
} else if (currentZoomIndex >= zoomSlides.length) {
currentZoomIndex = 0;
}
showZoomContent();
}

document.addEventListener('keydown', (e) => {
const viewer = document.getElementById('zoomViewer');
if (!viewer.classList.contains('active')) return;
if (e.key === 'ArrowRight') navigateZoom(1);
if (e.key === 'ArrowLeft') navigateZoom(-1);
if (e.key === 'Escape') closeZoom();
});

function shareSpecificProduct(productIndex, slideIndex) {
let productObj = products[productIndex];
if(!productObj) return;
let shareTitle = productObj.title;
let sharePriceDisplay = productObj.price *1.75;
let sharePriceFormatted = Math.round(sharePriceDisplay).toLocaleString('en-PK');
let sharePrice = "Rs " + sharePriceFormatted;
let shareImg = "";
if(productObj.slides[0].type === 'image') {
shareImg = productObj.slides[0].url;
} else {
shareImg = 'No Image';
}
let shareText = "Amazing Product Available!";
let itemCodeText = productObj.itemCode ? `\nItem Code: ${productObj.itemCode}` : '';
let supplyCodeText = productObj.supplyCode ? `\nSupply Code: ${productObj.supplyCode}` : '';
let text = `Hey! Check out this product:\n\n*${shareTitle}*\nPrice: ${sharePrice}\n${itemCodeText}${supplyCodeText}\n\nImage: ${shareImg}\n\n${shareText}\n\nVisit our store: www.mak360.store`;
window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
}

/* ========================================= */
/* MINI MENU LOGIC
/* ========================================= */
const miniMenuBtn = document.getElementById('miniMenuBtn');
const miniMenuDropdown = document.getElementById('miniMenuDropdown');

if (miniMenuBtn && miniMenuDropdown) {
miniMenuBtn.addEventListener('click', (e) => {
e.stopPropagation();
miniMenuDropdown.classList.toggle('active');
});

document.addEventListener('click', (e) => {
if (!miniMenuDropdown.contains(e.target) && !miniMenuBtn.contains(e.target)) {
miniMenuDropdown.classList.remove('active');
}
});
}

function closeMiniMenu() {
if (miniMenuDropdown) {
miniMenuDropdown.classList.remove('active');
}
}

let currentModalProduct = null;
let modalSlideIndex = 0;
const modal = document.getElementById("orderModal");
const mTitle = document.querySelector(".modal-title"); const mPrice = document.querySelector(".modal-price");
const mName = document.querySelector(".modal-name"); const mAddress = document.querySelector(".modal-address");
const mPhone = document.querySelector(".modal-phone"); const mQty = document.querySelector(".modal-qty");
const mTotal = document.querySelector(".modal-total"); const mWaBtn = document.querySelector(".modal-waBtn");
const mImg = document.querySelector(".modal-img"); const mVid = document.querySelector(".modal-vid");
const mTxt = document.querySelector(".modal-textSlide"); const mMediaBox = document.querySelector(".modal-cardMedia");
const mBackBtn = document.querySelector(".modal-backBtn");

function openModal(product, index) {
currentModalProduct = product; modalSlideIndex = index;
let displayPrice = product.price *1.75;
let formattedPrice = Math.round(displayPrice).toLocaleString('en-PK');
mTitle.innerText = product.title;
mPrice.innerText = "Rs " + formattedPrice;
modal.dataset.displayPrice = displayPrice;
mTotal.innerText = formattedPrice;
mName.value = ""; mAddress.value = ""; mPhone.value = ""; mQty.value =1; mWaBtn.disabled = true;
modal.classList.add("active"); document.body.style.overflow = "hidden";
showModalSlide();
}
function closeModal() {
modal.classList.remove("active"); document.body.style.overflow = "auto"; mVid.pause();
}
document.querySelector(".close-modal").onclick = closeModal;
function showModalSlide() {
mImg.style.display = mVid.style.display = mTxt.style.display = "none"; mVid.pause(); mMediaBox.classList.remove("text-active");
let pSlides = processTextSlides(currentModalProduct.slides);
pSlides.push({type:"text", text: SHIPPING_TEXT, isShipping: true});
let s = pSlides[modalSlideIndex];
mTxt.style.background = "";
mTxt.style.color = "";
if(s.type === "image") { mImg.src = s.url; mImg.style.display = "block"; }
else if(s.type === "video") { mVid.src = s.url; mVid.style.display = "block"; mVid.muted = false; mVid.play().catch(()=>{}); }
else {
if(s.isShipping) {
mTxt.innerHTML = `
<div class="shipping-highlight">
<div class="sh-title">Shipping & Return Information</div>
<div class="sh-item">
<span class="sh-highlight-text">üì¶ Free Delivery ‚Äì Karachi</span>
Cash on Delivery (COD) available within Karachi city.
</div>
<div class="sh-item">
<span class="sh-highlight-text">üöö Nationwide Shipping ‚Äì Pakistan</span>
Rs. 250 delivery charges (Advance Online Payment Required).
</div>
<div class="sh-item">
<span class="sh-highlight-text">üîÑ Easy Return & Exchange</span>
Damaged, incorrect, or not-as-described items can be returned or exchanged within 3 days of delivery.
</div>
<div class="sh-footer">Customer satisfaction is our priority!</div>
</div>
`;
} else {
mTxt.innerText = s.text;
}
mTxt.style.display="flex"; mMediaBox.classList.add("text-active");
}
}
document.querySelector(".modal-leftArrow").onclick = () => { modalSlideIndex = (modalSlideIndex - 1 + currentModalProduct.slides.length) % currentModalProduct.slides.length; showModalSlide(); };
document.querySelector(".modal-rightArrow").onclick = () => { modalSlideIndex = (modalSlideIndex + 1) % currentModalProduct.slides.length; showModalSlide(); };
const btnPlus = document.querySelector('.qty-btn.plus');
const btnMinus = document.querySelector('.qty-btn.minus');
btnPlus.addEventListener('click', () => {
let val = parseInt(mQty.value);
val++;
mQty.value = val;
mQty.dispatchEvent(new Event('input'));
});
btnMinus.addEventListener('click', () => {
let val = parseInt(mQty.value);
if (val > 1) {
val--;
mQty.value = val;
mQty.dispatchEvent(new Event('input'));
}
});
mQty.oninput = () => {
let basePrice = parseFloat(modal.dataset.displayPrice);
let total = basePrice * mQty.value;
mTotal.innerText = Math.round(total).toLocaleString('en-PK');
};
function checkModalForm() { mWaBtn.disabled = !(mName.value.trim() && mAddress.value.trim() && mPhone.value.trim()); }
[mName, mAddress, mPhone].forEach(el => el.oninput = checkModalForm);
mWaBtn.onclick = () => {
let activeSlide = currentModalProduct.slides[modalSlideIndex];
let imageUrl = activeSlide.type === "image" ? activeSlide.url : currentModalProduct.slides[0].url;
let totalDisplayPrice = mTotal.innerText;
let itemCode = currentModalProduct.itemCode || 'N/A';
let supplyCode = currentModalProduct.supplyCode || 'N/A';
let msg = `Product: ${currentModalProduct.title}\nImage: ${imageUrl}\nQty: ${mQty.value}\nTotal: Rs ${totalDisplayPrice}\nName: ${mName.value}\nAddress: ${mAddress.value}\nPhone: ${mPhone.value}\n\n(Item Code: ${itemCode} | Sup Code: ${supplyCode})`;
window.open("https://wa.me/923120380605?text="+encodeURIComponent(msg), '_blank');
closeModal();
orderJustPlaced = true;
const params = new URLSearchParams();
params.append('OrderDate', new Date().toLocaleString());
params.append('Product', currentModalProduct.title);
params.append('Name', mName.value);
params.append('Address', mAddress.value);
params.append('Phone', mPhone.value);
params.append('Total', totalDisplayPrice);
params.append('Quantity', mQty.value);
params.append('ProductImage', imageUrl);
params.append('Status', 'Pending');
params.append('ItemCode', itemCode);
params.append('SupplyCode', supplyCode);
fetch(`${GOOGLE_SCRIPT_URL}?${params}`, {
method: 'GET'
})
.then(response => response.text())
.then(data => {
showToast("Order Saved to Google Sheet!");
})
.catch(error => {
console.error('Error!', error.message);
showToast("Error saving to Sheet, but WA sent!");
});
};
function showToast(message) {
const toast = document.getElementById("toast");
toast.innerText = message;
toast.classList.add("show");
setTimeout(() => { toast.classList.remove("show"); }, 3000);
}
function showPageToast(pageName) {
showToast("Navigating to " + pageName + "...");
}

/* ========================================= */
/* CONTACT US PAGE LOGIC
/* ========================================= */
function submitContactForm() {
const name = document.getElementById('contactName').value.trim();
const email = document.getElementById('contactEmail').value.trim();
const phone = document.getElementById('contactPhone').value.trim();
const message = document.getElementById('contactMessage').value.trim();

if (!name || !email || !phone || !message) {
showToast("Please fill in all fields.");
return;
}

const btn = document.querySelector('.contact-submit-btn');
const originalText = btn.innerText;
btn.innerText = "Sending...";
btn.disabled = true;

const params = new URLSearchParams();
params.append('Date', new Date().toLocaleString());
params.append('Name', name);
params.append('Email', email);
params.append('Phone', phone);
params.append('Message', message);

if (CONTACT_SCRIPT_URL === "YOUR_CONTACT_SCRIPT_URL_HERE" || CONTACT_SCRIPT_URL === "") {
alert("Error: You need to set up Google Script URL in code for this to work!");
btn.innerText = originalText;
btn.disabled = false;
return;
}

fetch(`${CONTACT_SCRIPT_URL}?${params}`, {
method: 'GET'
})
.then(response => response.text())
.then(data => {
console.log("Form Submitted:", data);
showToast("Thank you! Message sent successfully.");

document.getElementById('contactName').value = "";
document.getElementById('contactEmail').value = "";
document.getElementById('contactPhone').value = "";
document.getElementById('contactMessage').value = "";

setTimeout(() => {
closeAllOverlays();
resetToAll();
}, 2000);
})
.catch(error => {
console.error('Error!', error.message);
showToast("Error sending message.");
btn.innerText = originalText;
btn.disabled = false;
});
}

function warmupBackend() {
if (products.length === 0) { return; }
console.log("Starting Force Backend Refresh (Warmup)...");
let hitCount = 0;
products.forEach(p => {
if(p.isHidden) return;
p.slides.forEach(slide => {
if (slide.type === 'image') {
const img = new Image();
img.src = slide.url;
hitCount++;
}
else if (slide.type === 'video') {
fetch(slide.url, { method: 'HEAD', mode: 'no-cors' }).catch(() => {});
hitCount++;
}
});
});
if(hitCount > 0) {
console.log(`Forced ${hitCount} backend hits initiated.`);
showToast("Backend Refreshed! Ready to View.");
} else {
console.log("No products found to warmup.");
}
}
function showThankYouOverlay() {
const overlay = document.getElementById("thankYouOverlay");
if(!overlay) return;
overlay.classList.add("active");
setTimeout(() => {
overlay.classList.remove("active");
}, 5000);
}
window.addEventListener('focus', () => {
if(orderJustPlaced) {
showThankYouOverlay();
orderJustPlaced = false;
}
});
function removePreloader() {
const preloader = document.getElementById('preloader');
if (preloader) {
preloader.style.opacity = '0';
preloader.style.visibility = 'hidden';
setTimeout(() => {
if (preloader && preloader.parentNode) {
preloader.parentNode.removeChild(preloader);
}
}, 500);
}
}
window.addEventListener('storage', function(e) {
if (e.key === 'MAK360_ProductDB') {
console.log("Manager Update Detected! Refreshing Store...");
const stored = localStorage.getItem('MAK360_ProductDB');
if (stored) {
products = JSON.parse(stored);
renderStore();
showToast("Store Updated Live!");
}
}
});
function trackVisitor() {
if (typeof VISITOR_TRACKER_URL !== 'undefined') {
fetch(VISITOR_TRACKER_URL, { method: 'GET', mode: 'no-cors' })
.then(() => { console.log("Visitor tracked successfully."); })
.catch(error => { console.error("Error tracking visitor:", error); });
}
}
window.addEventListener('DOMContentLoaded', () => {
console.log("DOM Loaded");
trackVisitor();
try {
loadProducts();
loadCategories();
localStorage.removeItem(STORAGE_KEY);
window.scrollTo(0, 0);
document.body.classList.add('landing-mode');
setTimeout(() => { removePreloader(); }, 1500);
setTimeout(() => { warmupBackend(); }, 10000);
} catch (error) {
console.error("Init Error:", error);
removePreloader();
}
});
window.addEventListener('load', function() {
const preloader = document.getElementById('preloader');
if (preloader && preloader.style.opacity !== '0') {
removePreloader();
}
});

</script>

</body>
</html>
